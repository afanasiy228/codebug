Перебор подходит для небольших ограничений. Для больших можно считать по битам.
