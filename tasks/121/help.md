1) Используйте SOS DP (sum over subsets).
2) Инициализируйте `dp = f`.
3) Для каждого бита `i` добавляйте вклад подмасок:
   `dp[mask] += dp[mask ^ (1<<i)]` для масок, где `mask` содержит бит `i`.
