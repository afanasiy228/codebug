<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <title>CodeBug — Задача</title>

    <!-- MONACO EDITOR CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>

    <style>
         :root {
            --bg: #0f0f11;
            --bg-card: #141417;
            --bg-soft: #1b1b20;
            --border: #262631;
            --text-main: #f5f5f7;
            --text-muted: #a3a3b8;
            --accent: #ffd451;
        }
        
        body {
            margin: 0;
            font-family: Inter, sans-serif;
            background: var(--bg);
            color: var(--text-main);
            overflow: hidden;
        }
        /* HEADER */
        
        header {
            background: #0d0d0f;
            border-bottom: 1px solid var(--border);
            padding: 12px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 20px;
            font-weight: 800;
            color: var(--accent);
        }
        
        nav a {
            color: var(--text-muted);
            margin-left: 25px;
            text-decoration: none;
            font-size: 14px;
        }
        
        nav a:hover {
            color: var(--accent);
        }
        /* MAIN LAYOUT */
        
        .split-container {
            display: flex;
            width: 100vw;
            height: calc(100vh - 70px);
            overflow: hidden;
        }
        /* LEFT PANEL */
        
        .left-panel {
            width: 40%;
            min-width: 260px;
            max-width: 80%;
            background: var(--bg-card);
            padding: 20px;
            overflow-y: auto;
            border-right: 1px solid var(--border);
        }
        
        .condition h1 {
            color: var(--accent);
        }
        /* SPLITTER */
        
        .splitter {
            width: 6px;
            cursor: col-resize;
            background: #2e2e33;
        }
        
        .splitter:hover {
            background: #ffd451;
        }
        /* RIGHT PANEL */
        
        .right-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-soft);
        }
        
        #editor {
            flex: 1;
            min-height: 200px;
        }
        
        .controls {
            padding: 12px;
            background: #111;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
        }
        
        .run-btn {
            background: #ffd451;
            color: #000;
        }
        
        .submit-btn {
            background: #333;
            color: #eee;
        }
        /* TABS */
        
        .tabs {
            display: flex;
            background: #111;
            border-bottom: 1px solid var(--border);
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            color: var(--text-muted);
        }
        
        .tab.active {
            color: var(--accent);
            border-bottom: 2px solid var(--accent);
        }
        
        .tab-content {
            display: none;
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: #141417;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .testcase {
            padding: 10px;
            border-radius: 10px;
            border: 1px solid var(--border);
            margin-bottom: 12px;
        }
    </style>
</head>

<body>

    <header>
        <div class="logo">CodeBug</div>
        <nav id="nav-links"></nav>
    </header>

    <div class="split-container">

        <!-- LEFT -->
        <div class="left-panel" id="leftPanel">
            <div class="condition">
                <h1>Ошибка в формуле площади</h1>
                <p>Тут будет текст условия задачи. Можно вставить любой Markdown или HTML.</p>
            </div>
        </div>

        <!-- SPLITTER -->
        <div class="splitter" id="splitter"></div>

        <!-- RIGHT -->
        <div class="right-panel" id="rightPanel">

            <div id="editor"></div>

            <div class="controls">
                <button class="btn run-btn" onclick="runCode()">Run</button>
                <button class="btn submit-btn" onclick="submitCode()">Submit</button>
            </div>

            <div class="tabs">
                <div class="tab active" data-tab="tests">Тесты</div>
                <div class="tab" data-tab="output">Вывод</div>
                <div class="tab" data-tab="errors">Ошибки</div>
            </div>

            <div id="tests" class="tab-content active">
                <div class="testcase"><b>Тест 1:</b><br>Ввод: [5 | 1 2 3 4 5]<br>Ожидаемый вывод: 15</div>
                <div class="testcase"><b>Тест 2:</b><br>Ввод: [3 | 10 10 10]<br>Ожидаемый вывод: 30</div>
            </div>

            <div id="output" class="tab-content"></div>
            <div id="errors" class="tab-content"></div>
        </div>
    </div>

    <!-- AUTH SYSTEM -->
    <script src="auth.js"></script>

    <script>
        /* ---------------------- SPLITTER (как в VSCode) ---------------------- */
        const splitter = document.getElementById('splitter');
        const left = document.getElementById('leftPanel');
        let isDragging = false;

        splitter.addEventListener('mousedown', () => {
            isDragging = true;
            document.body.style.cursor = 'col-resize';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            let w = e.clientX;
            if (w < 200) w = 200;
            if (w > window.innerWidth * 0.8) w = window.innerWidth * 0.8;
            left.style.width = w + 'px';
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            document.body.style.cursor = 'default';
        });

        /* ---------------------- TABS ---------------------- */
        document.querySelectorAll('.tab').forEach(tab => {
            tab.onclick = () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
            };
        });

        /* ---------------------- MONACO EDITOR ---------------------- */

        require.config({
            paths: {
                'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs'
            }
        });

        require(["vs/editor/editor.main"], () => {
            window.editor = monaco.editor.create(document.getElementById('editor'), {
                value: `#include <iostream>
using namespace std;

int main() {
    int n; cin >> n;
    int sum = 0;
    for (int i = 0; i < n; i++) {
        int x; cin >> x;
        sum += x;
    }
    cout << sum;
}`,
                language: "cpp",
                theme: "vs-dark",
                fontSize: 16,
                minimap: {
                    enabled: false
                }
            });
        });

        /* ---------------------- RUN / SUBMIT ---------------------- */
        function runCode() {
            document.getElementById("output").innerHTML = "<b>Вывод:</b><br>42 (пример)";
        }

        function submitCode() {
            document.getElementById("errors").innerHTML = "<b>Ошибок не найдено.</b>";
        }
    </script>

</body>

</html>